<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>业北Online</title>
  
  
  <link href="https://qdteng.online/atom.xml" rel="self"/>
  
  <link href="https://qdteng.online/"/>
  <updated>2024-10-16T01:25:45.768Z</updated>
  <id>https://qdteng.online/</id>
  
  <author>
    <name>qdteng</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>nginx日志</title>
    <link href="https://qdteng.online/2024/10/16/nginx%E6%97%A5%E5%BF%97/"/>
    <id>https://qdteng.online/2024/10/16/nginx%E6%97%A5%E5%BF%97/</id>
    <published>2024-10-16T00:31:18.000Z</published>
    <updated>2024-10-16T01:25:45.768Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Nignx的日志类型"><a href="#Nignx的日志类型" class="headerlink" title="Nignx的日志类型"></a>Nignx的日志类型</h2><p>我们进入到nginx目录下的log目录中，可以看到里面存放着三个文件，分别是access.log，error.log和nginx.pid文件，其中nginx.pid是用来记录当前nginx进程的pid号的，不属于日志文件。真正属于日志文件的是另外两个文件。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-rw-r--r-- 1 root root 90261926 Jun  9 09:38 access.log</span><br><span class="line">-rw-r--r-- 1 root root 21159964 Jun  8 16:36 error.log</span><br><span class="line">-rw-r--r-- 1 root root        5 May 24 15:18 nginx.pid</span><br></pre></td></tr></table></figure><h3 id="access-log日志文件"><a href="#access-log日志文件" class="headerlink" title="access.log日志文件"></a>access.log日志文件</h3><h4 id="1、access-log文件的介绍"><a href="#1、access-log文件的介绍" class="headerlink" title="1、access.log文件的介绍"></a>1、access.log文件的介绍</h4><p>access文件用于存放每个用户访问网站的请求日志，开发运维人员通过访问日志来分析用户的浏览器行为。默认情况下，nginx会在log目录下生成该文件，无需用户配置。<br><br><img src="https://raw.githubusercontent.com/qdteng-cn/qdteng/main/img/nginx-log-1.png"   /></p><h4 id="2、access-log的相关配置"><a href="#2、access-log的相关配置" class="headerlink" title="2、access.log的相关配置"></a>2、access.log的相关配置</h4><p>我们可以在$nginx_home&#x2F;conf&#x2F;nginx.conf配置文件中对nginx请求日志进行配置。配置的格式为：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">access_log path [format [buffer=size] [gzip[=level]] [flush=time] [if=condition]];</span><br></pre></td></tr></table></figure><p>其中，access_log是关键字，表示接下来的配置是关于access日志的配置，path为该日志文件的存储路径，后面还可以对日志输出格式、是否压缩、日志刷新时间等设置进行配置。可能有读者会留意到，上面截图中的用例在path后面写上了main，其实这里的main并不是什么关键字，而是nginx默认定义好的一个日志格式名称，我们可以在log_format中看到，nginx默认定义了一个名为main的日志输出格式。</p><p><strong>关于日志输出格式的配置</strong><br>nginx自带了一些变量，让我们能够作为日志输出格式进行配置，方便我们对用户的请求进行查询和统计。当然了，nginx其实默认的日志输出格式其实就已经把一些重要的请求参数保存到访问日志里面了，基本满足我们日常使用了，如果有需要可以根据下面的表单自定义配置所需要的日志格式。</p><table><thead><tr><th>参数</th><th>说明</th><th>示例</th></tr></thead><tbody><tr><td>$remote_addr</td><td>客户端地址</td><td>211.28.65.253</td></tr><tr><td>$remote_user</td><td>客户端用户名称</td><td>–</td></tr><tr><td>$time_local</td><td>访问时间和时区</td><td>18&#x2F;Jul&#x2F;2012:17:00:01 +0800</td></tr><tr><td>$request</td><td>请求的URI和HTTP协议</td><td>“GET &#x2F;article-10000.html HTTP&#x2F;1.1”</td></tr><tr><td>$http_host</td><td>请求地址，即浏览器中你输入的地址（IP或域名）</td><td><a href="http://www.wang.com/">www.wang.com</a> 192.168.100.100</td></tr><tr><td>$status</td><td>HTTP请求状态</td><td>200</td></tr><tr><td>$upstream_status</td><td>upstream状态</td><td>200</td></tr><tr><td>$body_bytes_sent</td><td>发送给客户端文件内容大小</td><td>1547</td></tr><tr><td>$http_referer</td><td>URL跳转来源</td><td><a href="https://www.baidu.com/">https://www.baidu.com/</a></td></tr><tr><td>$http_user_agent</td><td>用户终端浏览器等信息</td><td>“Mozilla&#x2F;4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident&#x2F;4.0; SV1; GTB7.0; .NET4.0C;”</td></tr><tr><td>$ssl_protocol</td><td>SSL协议版本</td><td>TLSv1</td></tr><tr><td>$ssl_cipher</td><td>交换数据中的算法</td><td>RC4-SHA</td></tr><tr><td>$upstream_addr</td><td>后台upstream的地址，即真正提供服务的主机地址</td><td>10.10.10.100:80</td></tr><tr><td>$request_time</td><td>整个请求的总时间</td><td>0.205</td></tr><tr><td>$upstream_response_time</td><td>请求过程中，upstream响应时间</td><td>0.002</td></tr></tbody></table><p>下面我们来简单地自定义一个日志输出格式，并且应用起来。</p><h5 id="步骤一：在http标签下新增一个log-format格式"><a href="#步骤一：在http标签下新增一个log-format格式" class="headerlink" title="步骤一：在http标签下新增一个log_format格式"></a>步骤一：在http标签下新增一个log_format格式</h5><p><br><img src="https://raw.githubusercontent.com/qdteng-cn/qdteng/main/img/nginx-log-2.png"   /></p><h5 id="步骤二：在server标签中应用定义新的access-log配置"><a href="#步骤二：在server标签中应用定义新的access-log配置" class="headerlink" title="步骤二：在server标签中应用定义新的access_log配置"></a>步骤二：在server标签中应用定义新的access_log配置</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">        listen 9600;</span><br><span class="line">        location / &#123;</span><br><span class="line">                root html;</span><br><span class="line">                access_log logs/mine_access.log mine_format;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="步骤三：使用nginx-s-reload重新加载配置文件"><a href="#步骤三：使用nginx-s-reload重新加载配置文件" class="headerlink" title="步骤三：使用nginx -s reload重新加载配置文件"></a>步骤三：使用nginx -s reload重新加载配置文件</h5><p>（注意，如果这里提示说日志文件不存在的话，就自己先手动建一下文件即可）<br>自己手动访问几次服务，就可以看到新生成的日志格式会和我们定义的日志格式一致了。<br><br><img src="https://raw.githubusercontent.com/qdteng-cn/qdteng/main/img/nginx-log-3.png"   /></p><p><strong>关于刷新时间的配置</strong><br>nginx默认情况下对访问日志是实时记录的，其实一定程度上来说是会占用cpu资源的，当然了大部分站点其实访问量并不大，所以实时记录日志所带来的性能消耗是可以忽略的。如果说对于访问量大且对性能要求较高的站点，可能会希望通过优化日志的输出频率来达到减少IO的效果。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">location / &#123;</span><br><span class="line">  root html;</span><br><span class="line">  access_log logs/mine_access.gz mine_format gzip flush=5s;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我们可以看一下官方对这个配置的介绍<br>配置完flush和buffer后，其实我们就相当于是有两个记录日志的节点了，一个是缓冲区满了，另外一个是到刷新日志的时间点了。缓冲区的存在使得nginx不需要针对每一个请求都做一次IO，可以节省一点系统资源。当然了，我们还可以开启gzip压缩（可选等级为1-9，级别越高压缩级别越高）来进一步减轻磁盘压力。<br><br><img src="https://raw.githubusercontent.com/qdteng-cn/qdteng/main/img/nginx-log-4.png"   /></p><p><strong>关闭访问日志的记录</strong><br>只需要配置access_log为off即可</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">location / &#123;</span><br><span class="line">    root html;</span><br><span class="line">    access_log off;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="error-log错误日志"><a href="#error-log错误日志" class="headerlink" title="error.log错误日志"></a>error.log错误日志</h3><p>相比于访问日志来说，运维人员可能更加关注错误日志文件，错误日志文件记录了nginx运行过程中遇到的错误信息（注意，也包括用户请求没有正常响应的错误日志），向有时候我们nginx启动失败后，都可以在这个error日志中找到对应较为详情的报错信息。<br>这里贴一下官网对error.log的介绍，该错误日志的配置格式为：error_log path level，error_log为关键字，path为日志保存的路径，level为日志级别。默认情况下nginx会在logs目录下建立一个名为error.log的日志文件，且日志级别为error。可选的日志级别配置从低到高分别为debug, info, notice, warn, error, crit, alert, emerg。<br><br><img src="https://raw.githubusercontent.com/qdteng-cn/qdteng/main/img/nginx-log-5.png"   /><br>我们可以简单演示一下，这个错误日志的用法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 9600;</span><br><span class="line">    location / &#123;</span><br><span class="line">        root html;</span><br><span class="line">        access_log logs/mine_access.log mine_format;</span><br><span class="line">        error_log logs/mine_error.log warn;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>配置完后reload一下nginx配置，然后在浏览器中随意访问一下不存在的资源，我们就可以在日志文件里面看到相关的错误日志了。</p><p><br><img src="https://raw.githubusercontent.com/qdteng-cn/qdteng/main/img/nginx-log-6.png"   /></p><h2 id="Nignx的日志分割"><a href="#Nignx的日志分割" class="headerlink" title="Nignx的日志分割"></a>Nignx的日志分割</h2><p>nginx默认是不会进行日志文件的分割操作的，也就是所有访问日志会一直往access.log文件里面追加，时间一长的话这个文件就会变得很大，nginx的性能也会降低,而且运维人员在查看当天文件的也很不方便。所以一般来说，我们都会选择按日对日志文件进行切割。</p><h3 id="logrotate结合crontab日志切割"><a href="#logrotate结合crontab日志切割" class="headerlink" title="logrotate结合crontab日志切割"></a>logrotate结合crontab日志切割</h3><p> vi &#x2F;etc&#x2F;logrotate.d&#x2F;nginx</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">/var/log/nginx/*.log /var/log/nginx/*.html &#123;</span><br><span class="line">    minsize 1024M</span><br><span class="line">    # 指定新建的日志文件权限以及所属用户和组</span><br><span class="line">    create 0644 nginx root</span><br><span class="line">    # 每月一次切割,取代默认的一周</span><br><span class="line">    monthly</span><br><span class="line">    #只保留一个日志.</span><br><span class="line">    rotate 3</span><br><span class="line">    missingok</span><br><span class="line">    dateext</span><br><span class="line">    notifempty</span><br><span class="line">    compress</span><br><span class="line">    delaycompress</span><br><span class="line">    sharedscripts</span><br><span class="line">    postrotate</span><br><span class="line">    if [ -f /usr/local/nginx/logs/nginx.pid ]; then</span><br><span class="line">        kill -USR1 `cat /usr/local/nginx/logs/nginx.pid`</span><br><span class="line">    fi</span><br><span class="line">    endscript</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="logrotate参数说明"><a href="#logrotate参数说明" class="headerlink" title="logrotate参数说明"></a>logrotate参数说明</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">配置   <span class="comment"># 说明</span></span></span><br><span class="line">daily# 指定转储周期为每天</span><br><span class="line">weekly# 指定转储周期为每周</span><br><span class="line">monthly# 指定转储周期为每月</span><br><span class="line">rotate count# 指定日志文件删除之前转储的次数，0 指没有备份，5 指保留5 个备份</span><br><span class="line">compress# 通过gzip 压缩转储以后的日志</span><br><span class="line">nocompress# 不做gzip压缩处理</span><br><span class="line">create mode owner group# 轮转时指定创建新文件的属性，如create 0777 nobody nobody</span><br><span class="line">nocreate# 不建立新的日志文件</span><br><span class="line">delaycompress# 和compress 一起使用时，转储的日志文件到下一次转储时才压缩</span><br><span class="line">nodelaycompress# 覆盖 delaycompress 选项，转储同时压缩</span><br><span class="line">missingok# 如果日志丢失，不报错继续滚动下一个日志</span><br><span class="line">ifempty# 即使日志文件为空文件也做轮转，这个是logrotate的缺省选项</span><br><span class="line">notifempty# 当日志文件为空时，不进行轮转</span><br><span class="line">mail address# 把转储的日志文件发送到指定的E-mail 地址</span><br><span class="line">olddir directory # 转储后的日志文件放入指定的目录，必须和当前日志文件在同一个文件系统</span><br><span class="line">noolddir# 转储后的日志文件和当前日志文件放在同一个目录下</span><br><span class="line">sharedscripts# 运行postrotate脚本，作用是在所有日志都轮转后统一执行一次脚本。如果没有配置这个，那么每个日志轮转后都会执行一次脚本</span><br><span class="line">prerotate# 在logrotate转储之前需要执行的指令，例如修改文件的属性等动作；必须独立成行</span><br><span class="line">postrotate# 在logrotate转储之后需要执行的指令，例如重新启动 (kill -HUP) 某个服务！必须独立成行</span><br><span class="line">dateext# 使用当期日期作为命名格式</span><br><span class="line">dateformat .%s# 配合dateext使用，紧跟在下一行出现，定义文件切割后的文件名，必须配合dateext使用，只支持 %Y %m %d %s 这四个参数</span><br><span class="line">size(minsize) log-size# 当日志文件到达指定的大小时才转储，log-size能指定bytes(缺省)及KB (sizek)或MB(sizem)，例如 size 100M</span><br></pre></td></tr></table></figure><h3 id="配置crontab定时任务"><a href="#配置crontab定时任务" class="headerlink" title="配置crontab定时任务"></a>配置crontab定时任务</h3><p>crontab -e 配置 每月1日1点分割一次文件</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0 0 1 1 * ? /usr/sbin/logrotate -vf /etc/logrotate.d/nginx</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Nignx的日志类型&quot;&gt;&lt;a href=&quot;#Nignx的日志类型&quot; class=&quot;headerlink&quot; title=&quot;Nignx的日志类型&quot;&gt;&lt;/a&gt;Nignx的日志类型&lt;/h2&gt;&lt;p&gt;我们进入到nginx目录下的log目录中，可以看到里面存放着三个文件，分别是</summary>
      
    
    
    
    <category term="运维" scheme="https://qdteng.online/categories/%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="linux" scheme="https://qdteng.online/tags/linux/"/>
    
    <category term="nginx" scheme="https://qdteng.online/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>谈谈clickhouse优化</title>
    <link href="https://qdteng.online/2024/10/14/%E8%B0%88%E8%B0%88clickhouse%E4%BC%98%E5%8C%96/"/>
    <id>https://qdteng.online/2024/10/14/%E8%B0%88%E8%B0%88clickhouse%E4%BC%98%E5%8C%96/</id>
    <published>2024-10-14T05:51:03.000Z</published>
    <updated>2024-10-15T07:15:27.207Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ClickHouse版本"><a href="#ClickHouse版本" class="headerlink" title="ClickHouse版本"></a>ClickHouse版本</h3><p>23.10.1.396</p><h3 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h3><img src="https://raw.githubusercontent.com/qdteng-cn/qdteng/main/img/内存过高显示.png"  width="600" height="200" /><p>情况如上图，项目运行一段时间，随着数据的累计，服务器内存占用率已经接近100%，通过top命令查看内存占用情况，发现clickhouse进程占用了80%的内存，导致服务器内存占用率接近100%</p><h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><ul><li>[1] <a href="https://blog.csdn.net/qq_38651064/article/details/120930481">Clickhouse常见配置解析</a></li><li>[2] <a href="https://blog.csdn.net/guaoran/article/details/125561361">Clickhouse 参数优化配置</a></li></ul><h3 id="一轮优化"><a href="#一轮优化" class="headerlink" title="一轮优化"></a>一轮优化</h3><p>比较匆忙的看了资料，配置文件中有这样一个描述 ,于是将其改成了8G看看效果</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- Maximum memory usage (resident set size) for server process.</span><br><span class="line">     Zero value or unset means default. Default is &quot;max_server_memory_usage_to_ram_ratio&quot; of available physical RAM.</span><br><span class="line">     If the value is larger than &quot;max_server_memory_usage_to_ram_ratio&quot; of available physical RAM, it will be cut down.</span><br><span class="line"></span><br><span class="line">     The constraint is checked on query execution time.</span><br><span class="line">     If a query tries to allocate memory and the current memory usage plus allocation is greater</span><br><span class="line">      than specified threshold, exception will be thrown.</span><br><span class="line"></span><br><span class="line">     It is not practical to set this constraint to small values like just a few gigabytes,</span><br><span class="line">      because memory allocator will keep this amount of memory in caches and the server will deny service of queries.</span><br><span class="line"><span class="meta prompt_">  --&gt;</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">&lt;max_server_memory_usage&gt;8G&lt;/max_server_memory_usage&gt;</span></span><br></pre></td></tr></table></figure><h3 id="二轮优化"><a href="#二轮优化" class="headerlink" title="二轮优化"></a>二轮优化</h3><img src="https://raw.githubusercontent.com/qdteng-cn/qdteng/main/img/clickhouse超过内存限制报错.png"  width="900" height="100" /><p> 在运行了大概2个月之后，情况没有改善，内存仍然继续增长，但是本次的提示如上图超过的数值跟我文件中配置的数值有偏差，当然中间也尝试过配置<br>使用类似 SET max_memory_usage &#x3D; 3 * 1024 * 1024 * 1024; 这样的语句去动态配置，但是使用如下语句查询返回还是没变化</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">select  *  from `system`.settings  where name in(</span><br><span class="line">        &#x27;max_memory_usage_for_user&#x27;, </span><br><span class="line">        &#x27;max_memory_usage&#x27;, </span><br><span class="line">        &#x27;max_bytes_before_external_group_by&#x27;, </span><br><span class="line">        &#x27;max_bytes_before_external_sort&#x27;, </span><br><span class="line">        &#x27;max_memory_usage_for_all_queries&#x27;, </span><br><span class="line">        &#x27;max_concurrent_queries_for_user&#x27;,</span><br><span class="line">        &#x27;max_concurrent_queries_for_all_users&#x27;,</span><br><span class="line">        &#x27;max_concurrent_queries&#x27;,</span><br><span class="line">        &#x27;max_server_memory_usage&#x27;,</span><br><span class="line">        &#x27;max_server_memory_usage_to_ram_ratio&#x27;,</span><br><span class="line">        &#x27;max_thread_pool_size&#x27;,</span><br><span class="line">        &#x27;distributed_aggregation_memory_efficient&#x27;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>后来增加了配置项 </p><h4 id="config-xml"><a href="#config-xml" class="headerlink" title="config.xml"></a>config.xml</h4><ul><li>max_server_memory_usage_to_ram_ratio <br/><br>这里按照总内存的百分比计算<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;clickhouse&gt;</span><br><span class="line">    &lt;!-- On memory constrained environments you may have to set this to value larger than 1.--&gt;</span><br><span class="line">    &lt;max_server_memory_usage_to_ram_ratio&gt;0.2&lt;/max_server_memory_usage_to_ram_ratio&gt;</span><br><span class="line">&lt;/clickhouse&gt;    </span><br></pre></td></tr></table></figure></li></ul><h4 id="users-xml"><a href="#users-xml" class="headerlink" title="users.xml"></a>users.xml</h4><ul><li>max_bytes_before_external_group_by</li><li>max_bytes_before_external_sort <br/><br> 这里设置分组查询和排序时内存的最大使用阈值1G，超过使用硬盘<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;clickhouse&gt;</span><br><span class="line">    &lt;profiles&gt;</span><br><span class="line">        &lt;default&gt;</span><br><span class="line">          &lt;max_bytes_before_external_group_by&gt;1073741824&lt;/max_bytes_before_external_group_by&gt;</span><br><span class="line">          &lt;max_bytes_before_external_sort&gt;1073741824&lt;/max_bytes_before_external_sort&gt;</span><br><span class="line">        &lt;/default&gt;</span><br><span class="line">    &lt;profiles&gt;</span><br><span class="line">&lt;/clickhouse&gt;    </span><br></pre></td></tr></table></figure>2024-10-14 15:08:09  后面跟进看看优化效果<img src="https://raw.githubusercontent.com/qdteng-cn/qdteng/main/img/ck2轮优化结果.png"  width="600" height="200" /></li></ul><hr><p>完结</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;ClickHouse版本&quot;&gt;&lt;a href=&quot;#ClickHouse版本&quot; class=&quot;headerlink&quot; title=&quot;ClickHouse版本&quot;&gt;&lt;/a&gt;ClickHouse版本&lt;/h3&gt;&lt;p&gt;23.10.1.396&lt;/p&gt;
&lt;h3 id=&quot;问题描述&quot;&gt;</summary>
      
    
    
    
    <category term="运维" scheme="https://qdteng.online/categories/%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="clickhouse" scheme="https://qdteng.online/tags/clickhouse/"/>
    
  </entry>
  
  <entry>
    <title>redis单机安装使用_linux</title>
    <link href="https://qdteng.online/2024/10/08/redis%E5%AE%89%E8%A3%85%E4%BD%BF%E7%94%A8-linux/"/>
    <id>https://qdteng.online/2024/10/08/redis%E5%AE%89%E8%A3%85%E4%BD%BF%E7%94%A8-linux/</id>
    <published>2024-10-08T00:08:18.000Z</published>
    <updated>2024-10-08T07:00:47.808Z</updated>
    
    <content type="html"><![CDATA[<h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><ul><li>[1] <a href="https://zhuanlan.zhihu.com/p/340759575">Redis和AOF和RDB</a></li><li>[2] <a href="https://blog.csdn.net/weixin_39523456/article/details/111314475">bind与protected-mode参数</a></li></ul><h3 id="安装使用"><a href="#安装使用" class="headerlink" title="安装使用"></a>安装使用</h3><h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><ul><li><p>首先，使用以下命令安装所有必需的依赖项：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install wget curl gnupg -y</span><br></pre></td></tr></table></figure></li><li><p>接下来，使用以下命令下载并添加 GPG 密钥：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl https://packages.redis.io/gpg | apt-key add -</span><br></pre></td></tr></table></figure></li><li><p>接下来，使用以下命令添加 Redis 官方存储库：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;deb https://packages.redis.io/deb $(lsb_release -cs) main&quot; | tee /etc/apt/sources.list.d/redis.list</span><br></pre></td></tr></table></figure></li><li><p>接下来，使用以下命令更新存储库缓存并安装 Redis：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt-get update -y</span><br><span class="line">apt-get install redis-server -y</span><br></pre></td></tr></table></figure></li><li><p>安装 Redis 后，使用以下命令验证 Redis 安装：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-cache policy redis-server</span><br></pre></td></tr></table></figure></li><li><p>要启动 Redis 服务，请运行以下命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start redis-server</span><br></pre></td></tr></table></figure></li><li><p>要检查 Redis 服务的状态，请运行以下命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status redis-server</span><br></pre></td></tr></table></figure></li></ul><h4 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h4><p>默认情况下，Redis 侦听本地主机，如果要从远程主机连接 Redis，则需要允许 Redis 进行远程连接。</p><ul><li><p>请使用您喜欢的编辑器编辑 Redis 配置文件：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/redis/redis.conf</span><br></pre></td></tr></table></figure></li><li><p>注释掉以下行： <br></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">这里注释掉以下行，以允许其他ip链接</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="built_in">bind</span> 127.0.0.1 -::1</span></span><br></pre></td></tr></table></figure></li><li><p>接下来，设置Redis密码，如下所示：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">这里设置redis需要开启密码访问</span></span><br><span class="line">requirepass securepassword</span><br></pre></td></tr></table></figure></li><li><p>接下来，更改以下行：  <br></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">RBD的优点是，全量数据二进制文件，数据恢复快。 缺点是，可能会丢数据;AOF会将redis中每一步对数据修改的操作记录（日志）append到相应的文件中。</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">这里开启AOF</span></span><br><span class="line">appendonly yes</span><br><span class="line">appendfilename &quot;appendonly.aof&quot;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">protected-mode(Redis本身的一个安全层),这里配置关闭</span></span><br><span class="line">protected-mode no</span><br></pre></td></tr></table></figure></li><li><p>保存并关闭文件，然后重新启动 Redis 服务以应用更改：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart redis-server</span><br></pre></td></tr></table></figure></li></ul><h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><p>连接Redis实例<br>您可以使用 redis-cli 命令行实用程序从本地或远程计算机连接 Redis 服务器。<br>在终端中输入以下命令来连接到Redis数据库：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">redis-cli -h &lt;host&gt; -p &lt;port&gt; -a &lt;password&gt;</span></span><br><span class="line">redis-cli -h localhost -p 6379 -a mypassword</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;参考资料&quot;&gt;&lt;a href=&quot;#参考资料&quot; class=&quot;headerlink&quot; title=&quot;参考资料&quot;&gt;&lt;/a&gt;参考资料&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;[1] &lt;a href=&quot;https://zhuanlan.zhihu.com/p/340759575&quot;&gt;Red</summary>
      
    
    
    
    <category term="运维" scheme="https://qdteng.online/categories/%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="linux" scheme="https://qdteng.online/tags/linux/"/>
    
    <category term="debian" scheme="https://qdteng.online/tags/debian/"/>
    
    <category term="redis" scheme="https://qdteng.online/tags/redis/"/>
    
  </entry>
  
  <entry>
    <title>esp32玩一玩</title>
    <link href="https://qdteng.online/2024/10/07/esp32%E7%8E%A9%E4%B8%80%E7%8E%A9/"/>
    <id>https://qdteng.online/2024/10/07/esp32%E7%8E%A9%E4%B8%80%E7%8E%A9/</id>
    <published>2024-10-07T00:15:29.000Z</published>
    <updated>2024-10-16T00:28:38.262Z</updated>
    
    <content type="html"><![CDATA[<h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><p>[1] <a href="https://www.zhihu.com/question/483755448">ESP32和ESP8266比较有哪些不同？</a> <br><br>[2] <a href="https://products.espressif.com/#/product-comparison">ESP32各型号比较</a> <br><br>[3] <a href="https://www.nologo.tech/product/esp32/esp32c3SuperMini/esp32C3SuperMiniFoot.html">ESP32C3SuperMini 引脚使用</a> <br><br>[4] <a href="https://blog.csdn.net/m0_60999883/article/details/136223612">使用VSCode与PlatformIO</a></p><ol><li>温度传感器：DS18B20 接入添加电阻示例<br><br><img src="https://raw.githubusercontent.com/qdteng-cn/qdteng/main/img/DS18B20温度传感电阻.png"  width="500" height="500" /></li><li>双隔离电源5V12V<br><br><img src="https://raw.githubusercontent.com/qdteng-cn/qdteng/main/img/双隔离电源5V12V.png"  width="500" height="500" /></li><li>esp32控制继电器<br><br><img src="https://raw.githubusercontent.com/qdteng-cn/qdteng/main/img/esp32控制继电器.jpg"  width="500" height="500" /></li><li>vs中 serial monitor 好用的串口调试插件<br><br><img src="https://raw.githubusercontent.com/qdteng-cn/qdteng/main/img/serialmonitor串口调试插件.png"  width="500" height="400" /></li><li>usb红白绿蓝 红白绿黑四根线分别是什么<br><br><img src="https://raw.githubusercontent.com/qdteng-cn/qdteng/main/img/typec_usb线.png"  width="500" height="300" /><br></li></ol><ul><li>红色－USB电源 标有－VCC、Power、5V、5VSB字样</li><li>白色－USB数据线（负）－DATA-、USBD-、PD-、USBDT+</li><li>绿色－USB数据线（正）－DATA+、USBD+、PD+、USBDT+</li><li>黑色&#x2F;蓝色－地线 －GND、Ground</li><li>其中的红、白、绿、黑是标准的配线颜色，分别对应1、2、3、4引脚。四根线分别是 1-电源 2-数据 3-数据 4-电源，一般的排列方式是：红白绿黑从左到右。</li><li>一些分标准的为红白绿蓝四根线。但是功能都是一样的。</li></ul><hr><p>完结</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;参考资料&quot;&gt;&lt;a href=&quot;#参考资料&quot; class=&quot;headerlink&quot; title=&quot;参考资料&quot;&gt;&lt;/a&gt;参考资料&lt;/h3&gt;&lt;p&gt;[1] &lt;a href=&quot;https://www.zhihu.com/question/483755448&quot;&gt;ESP32和E</summary>
      
    
    
    
    <category term="后端" scheme="https://qdteng.online/categories/%E5%90%8E%E7%AB%AF/"/>
    
    
    <category term="IOT" scheme="https://qdteng.online/tags/IOT/"/>
    
    <category term="ESP32" scheme="https://qdteng.online/tags/ESP32/"/>
    
    <category term="Arduino" scheme="https://qdteng.online/tags/Arduino/"/>
    
    <category term="PlatformIO" scheme="https://qdteng.online/tags/PlatformIO/"/>
    
  </entry>
  
  <entry>
    <title>windows_server版本开启多用户同时远程登录</title>
    <link href="https://qdteng.online/2024/10/06/windows-server%E7%89%88%E6%9C%AC%E5%BC%80%E5%90%AF%E5%A4%9A%E7%94%A8%E6%88%B7%E5%90%8C%E6%97%B6%E8%BF%9C%E7%A8%8B%E7%99%BB%E5%BD%95/"/>
    <id>https://qdteng.online/2024/10/06/windows-server%E7%89%88%E6%9C%AC%E5%BC%80%E5%90%AF%E5%A4%9A%E7%94%A8%E6%88%B7%E5%90%8C%E6%97%B6%E8%BF%9C%E7%A8%8B%E7%99%BB%E5%BD%95/</id>
    <published>2024-10-06T02:03:41.000Z</published>
    <updated>2024-10-06T02:49:41.078Z</updated>
    
    <content type="html"><![CDATA[<h3 id="事情是这样的"><a href="#事情是这样的" class="headerlink" title="事情是这样的"></a>事情是这样的</h3><p>   你是不是也经常面临登陆windows server远程主机时，突然被断开，确认后是同事登陆了，然后又回来，又断开了。</p><h3 id="开启多用户登录"><a href="#开启多用户登录" class="headerlink" title="开启多用户登录"></a>开启多用户登录</h3><ul><li><a href="https://www.cnblogs.com/gb2013/p/win-server-2012-account-allow-multi-user-login.html">参考资料</a></li><li>gpedit.msc</li></ul><p>按照 计算机配置-&gt;管理模板-&gt;Windows 组件-&gt;远程桌面服务-&gt;远程桌面会话主机-&gt;连接 的路径，找到“将远程桌面服务的用户限制到单独的远程桌面会话”配置项：</p><p>选择“已禁用”选项，确定即可</p><p><img src="https://raw.githubusercontent.com/qdteng-cn/qdteng/main/img/winserver%E8%BF%9C%E7%A8%8B%E6%A1%8C%E9%9D%A2%E5%BC%80%E5%90%AF%E5%A4%9A%E7%94%A8%E6%88%B7.png"></p><hr><p>完结</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;事情是这样的&quot;&gt;&lt;a href=&quot;#事情是这样的&quot; class=&quot;headerlink&quot; title=&quot;事情是这样的&quot;&gt;&lt;/a&gt;事情是这样的&lt;/h3&gt;&lt;p&gt;   你是不是也经常面临登陆windows server远程主机时，突然被断开，确认后是同事登陆了，然后又回</summary>
      
    
    
    
    <category term="运维" scheme="https://qdteng.online/categories/%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="windows" scheme="https://qdteng.online/tags/windows/"/>
    
    <category term="server" scheme="https://qdteng.online/tags/server/"/>
    
    <category term="远程桌面" scheme="https://qdteng.online/tags/%E8%BF%9C%E7%A8%8B%E6%A1%8C%E9%9D%A2/"/>
    
  </entry>
  
  <entry>
    <title>mysql安装_windows</title>
    <link href="https://qdteng.online/2024/10/03/mysql%E5%AE%89%E8%A3%85-windows/"/>
    <id>https://qdteng.online/2024/10/03/mysql%E5%AE%89%E8%A3%85-windows/</id>
    <published>2024-10-03T01:37:04.000Z</published>
    <updated>2024-10-06T01:54:11.835Z</updated>
    
    <content type="html"><![CDATA[<h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><ul><li><a href="https://blog.csdn.net/qq_45344586/article/details/129286105">MySql免安装配置教程-CSDN</a></li><li><a href="https://blog.csdn.net/huanzi833/article/details/139906918">Server和Installer有什么区别</a></li><li><a href="https://downloads.mysql.com/archives/community/">MySQL Community Server</a></li></ul><h3 id="安装使用"><a href="#安装使用" class="headerlink" title="安装使用"></a>安装使用</h3><p>注意：绝对路径中要避免出现中文</p><ul><li>my.ini放在mysql安装目录的根目录</li></ul><h4 id="my-ini-配置"><a href="#my-ini-配置" class="headerlink" title="my.ini 配置"></a>my.ini 配置</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line"># 设置3306端口</span><br><span class="line">port=3306</span><br><span class="line">#错误日志的路径</span><br><span class="line">log-error=D:\\software\mysql-8.0.32-winx64\\mysql.error.log</span><br><span class="line"># 设置mysql的安装目录</span><br><span class="line">basedir=D:\\software\mysql-8.0.32-winx64</span><br><span class="line"># 设置mysql数据库的数据的存放目录，data文件夹它会自行创建，不要自己手动创建</span><br><span class="line">datadir= D:\\software\mysql-8.0.32-winx64\Data</span><br><span class="line"># 允许最大连接数</span><br><span class="line">max_connections=200</span><br><span class="line"># 允许连接失败的次数。</span><br><span class="line">max_connect_errors=10</span><br><span class="line"># 服务端使用的字符集默认为utf8mb4</span><br><span class="line">character-set-server=utf8mb4</span><br><span class="line"># 创建新表时将使用的默认存储引擎</span><br><span class="line">default-storage-engine=INNODB</span><br><span class="line"># 默认使用“mysql_native_password”插件认证</span><br><span class="line">#mysql_native_password</span><br><span class="line">default_authentication_plugin=mysql_native_password</span><br><span class="line">#解决groupby查询非groupby字段问题</span><br><span class="line">sql_mode=STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION</span><br><span class="line">[mysql]</span><br><span class="line"># 设置mysql客户端默认字符集</span><br><span class="line">default-character-set=utf8mb4</span><br><span class="line">[client]</span><br><span class="line"># 设置mysql客户端连接服务端时默认使用的端口</span><br><span class="line">port=3306</span><br><span class="line">default-character-set=utf8mb4</span><br></pre></td></tr></table></figure><h4 id="初始化数据库"><a href="#初始化数据库" class="headerlink" title="初始化数据库"></a>初始化数据库</h4> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">命令行中会生成root的临时密码注意保存，首次登陆后需要修改</span></span><br><span class="line">mysqld --initialize --console</span><br></pre></td></tr></table></figure><h4 id="安装MySQL服务"><a href="#安装MySQL服务" class="headerlink" title="安装MySQL服务"></a>安装MySQL服务</h4> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">可以删除已有的服务名</span></span><br><span class="line">sc delete mysql5</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">创建一个指定服务名[mysql57]的服务</span></span><br><span class="line">mysqld --install mysql57</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">启动指定服务,启动失败可以查看 my.ini中配置的log-error错误日志</span></span><br><span class="line">net start mysql57</span><br></pre></td></tr></table></figure><h4 id="客户端连接"><a href="#客户端连接" class="headerlink" title="客户端连接"></a>客户端连接</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">指定ip  端口 用户 连接</span> </span><br><span class="line">mysql -u root -h 127.0.0.1 -P 3306  -p</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="5-7-用户操作"><a href="#5-7-用户操作" class="headerlink" title="5.7 用户操作"></a>5.7 用户操作</h4> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">修改root密码</span></span><br><span class="line">alter user &#x27;root&#x27;@&#x27;localhost&#x27; identified by &#x27;123&#x27;;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">允许root远程访问</span></span><br><span class="line">grant all privileges on *.* to &#x27;root&#x27;@&#x27;%&#x27; identified by &#x27;123&#x27; with grant option;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">添加用户</span></span><br><span class="line">create user &#x27;user&#x27;@&#x27;%&#x27; identified by &#x27;123&#x27;;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">授权某个用户所有数据库所有权限</span></span><br><span class="line">grant all privileges on *.* to &#x27;user&#x27;@&#x27;%&#x27;;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">删除用户</span></span><br><span class="line">drop user &#x27;user&#x27;@&#x27;%&#x27;;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">刷新权限</span></span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure><h4 id="8-用户操作"><a href="#8-用户操作" class="headerlink" title="8.* 用户操作"></a>8.* 用户操作</h4> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">修改加密规则 防止一些可视化工具连接不兼容报错</span></span><br><span class="line">ALTER USER &#x27;root&#x27;@&#x27;localhost&#x27; IDENTIFIED BY &#x27;password&#x27; PASSWORD EXPIRE NEVER; </span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">修改root密码</span></span><br><span class="line">ALTER USER &#x27;root&#x27;@&#x27;%&#x27; IDENTIFIED WITH mysql_native_password BY &#x27;password&#x27;; </span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">允许root远程访问</span></span><br><span class="line">GRANT ALL ON *.* TO &#x27;root&#x27;@&#x27;%&#x27;;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">添加用户</span></span><br><span class="line">CREATE USER &#x27;用户名&#x27;@&#x27;%或者IP&#x27; IDENTIFIED BY &#x27;密码&#x27;;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">授权某个用户所有数据库所有权限</span></span><br><span class="line">GRANT ALL PRIVILEGES ON *.* TO &#x27;用户名&#x27;@&#x27;IP/localhost/%&#x27;;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">删除用户</span></span><br><span class="line">drop user &#x27;user&#x27;@&#x27;%&#x27;;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">刷新权限</span></span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure><hr><p>完结</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;参考资料&quot;&gt;&lt;a href=&quot;#参考资料&quot; class=&quot;headerlink&quot; title=&quot;参考资料&quot;&gt;&lt;/a&gt;参考资料&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://blog.csdn.net/qq_45344586/article/detai</summary>
      
    
    
    
    <category term="运维" scheme="https://qdteng.online/categories/%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="mysql5.7.36" scheme="https://qdteng.online/tags/mysql5-7-36/"/>
    
    <category term="mysql" scheme="https://qdteng.online/tags/mysql/"/>
    
    <category term="windows" scheme="https://qdteng.online/tags/windows/"/>
    
  </entry>
  
  <entry>
    <title>navicat的另类使用</title>
    <link href="https://qdteng.online/2024/09/29/naviat%E7%9A%84%E5%8F%A6%E7%B1%BB%E4%BD%BF%E7%94%A8/"/>
    <id>https://qdteng.online/2024/09/29/naviat%E7%9A%84%E5%8F%A6%E7%B1%BB%E4%BD%BF%E7%94%A8/</id>
    <published>2024-09-29T13:21:44.000Z</published>
    <updated>2024-10-06T02:26:53.747Z</updated>
    
    <content type="html"><![CDATA[<h2 id="事情是这样的"><a href="#事情是这样的" class="headerlink" title="事情是这样的"></a>事情是这样的</h2><pre><code>比如项目中有一些报表需要定时生成excel，你又不想重复性操作电脑SQL查询</code></pre><h2 id="解决方式"><a href="#解决方式" class="headerlink" title="解决方式"></a>解决方式</h2><h3 id="1-首先你得有个navicat"><a href="#1-首先你得有个navicat" class="headerlink" title="1.首先你得有个navicat"></a>1.首先你得有个navicat</h3><ul><li><a href="https://pan.baidu.com/s/1h-0X4b_5c83eyKYKaHqpKw?pwd=22b9">链接</a><br>提取码：22b9</li></ul><h3 id="2-按需编写一段业务SQL"><a href="#2-按需编写一段业务SQL" class="headerlink" title="2.按需编写一段业务SQL"></a>2.按需编写一段业务SQL</h3><p> 这个一般是个select 语句</p><h3 id="3-看图作业"><a href="#3-看图作业" class="headerlink" title="3.看图作业"></a>3.看图作业</h3><h4 id="1-创建导出任务保存配置"><a href="#1-创建导出任务保存配置" class="headerlink" title="1) 创建导出任务保存配置"></a>1) 创建导出任务保存配置</h4><img src="https://raw.githubusercontent.com/qdteng-cn/qdteng/main/img/1728180261244.jpg" width="200" height="200"  /><img src="https://raw.githubusercontent.com/qdteng-cn/qdteng/main/img/2.png" width="200" height="200"  /><img src="https://raw.githubusercontent.com/qdteng-cn/qdteng/main/img/3.png" width="200" height="200"  /><h4 id="2-新建批处理作业"><a href="#2-新建批处理作业" class="headerlink" title="2) 新建批处理作业"></a>2) 新建批处理作业</h4><img src="https://raw.githubusercontent.com/qdteng-cn/qdteng/main/img/4.png" width="200" height="200"  /><img src="https://raw.githubusercontent.com/qdteng-cn/qdteng/main/img/5.png" width="200" height="200"  /><h4 id="3-邮件配置"><a href="#3-邮件配置" class="headerlink" title="3) 邮件配置"></a>3) 邮件配置</h4><img src="https://raw.githubusercontent.com/qdteng-cn/qdteng/main/img/6.png" width="200" height="200"  /><h4 id="4-配置定时发送"><a href="#4-配置定时发送" class="headerlink" title="4) 配置定时发送"></a>4) 配置定时发送</h4><img src="https://raw.githubusercontent.com/qdteng-cn/qdteng/main/img/7.png" width="200" height="200"  /><hr><p>完结</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;事情是这样的&quot;&gt;&lt;a href=&quot;#事情是这样的&quot; class=&quot;headerlink&quot; title=&quot;事情是这样的&quot;&gt;&lt;/a&gt;事情是这样的&lt;/h2&gt;&lt;pre&gt;&lt;code&gt;比如项目中有一些报表需要定时生成excel，你又不想重复性操作电脑SQL查询
&lt;/code&gt;</summary>
      
    
    
    
    <category term="后端" scheme="https://qdteng.online/categories/%E5%90%8E%E7%AB%AF/"/>
    
    
    <category term="windows" scheme="https://qdteng.online/tags/windows/"/>
    
    <category term="naviat" scheme="https://qdteng.online/tags/naviat/"/>
    
    <category term="定时" scheme="https://qdteng.online/tags/%E5%AE%9A%E6%97%B6/"/>
    
    <category term="报表" scheme="https://qdteng.online/tags/%E6%8A%A5%E8%A1%A8/"/>
    
    <category term="邮件" scheme="https://qdteng.online/tags/%E9%82%AE%E4%BB%B6/"/>
    
  </entry>
  
  <entry>
    <title>https自动更新</title>
    <link href="https://qdteng.online/2024/09/29/https%E8%87%AA%E5%8A%A8%E6%9B%B4%E6%96%B0/"/>
    <id>https://qdteng.online/2024/09/29/https%E8%87%AA%E5%8A%A8%E6%9B%B4%E6%96%B0/</id>
    <published>2024-09-29T05:38:33.000Z</published>
    <updated>2024-10-06T01:03:44.794Z</updated>
    
    <content type="html"><![CDATA[<h3 id="事情是这样的"><a href="#事情是这样的" class="headerlink" title="事情是这样的"></a>事情是这样的</h3><p>你是不是也有一年又一年的新项目接入,对于要求https协议的网站，每3个月的TSL证书更新需求都要自己手动去申请<br><img src="https://github.com/qdteng-cn/qdteng/blob/main/img202409212129741.png"  width="200" height="200" /></p><h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><ul><li><a href="https://cloud.tencent.com/developer/techpedia/1596">TLS证书</a></li><li><a href="https://segmentfault.com/a/1190000045287036">ACME协议</a></li><li><a href="https://github.com/acmesh-official/acme.sh">acme.sh</a></li><li><a href="https://blog.csdn.net/weixin_57025326/article/details/136286399">自动化部署证书 acme.sh 使用教程-CSDN博客</a></li></ul><h3 id="acme-sh安装"><a href="#acme-sh安装" class="headerlink" title="acme.sh安装"></a>acme.sh安装</h3><h4 id="使用源码安装："><a href="#使用源码安装：" class="headerlink" title="使用源码安装："></a>使用源码安装：</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">git clone --depth 1 https://github.com/acmesh-official/acme.sh.git</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">国内访问 github 便秘 就用gitee</span> </span><br><span class="line">git clone --depth 1 https://gitee.com/neilpang/acme.sh.git</span><br><span class="line">cd acme.sh</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">请注意替换 username@example.com 为你自己的邮箱，避免无法收到上游证书的邮件通知。</span></span><br><span class="line">./acme.sh --install -m username@example.com</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">安装完成后重新加载 Bash</span></span><br><span class="line">source ~/.bashrc</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">检查是否生效</span> </span><br><span class="line">acme.sh -v</span><br></pre></td></tr></table></figure><h4 id="配置-DNS-API"><a href="#配置-DNS-API" class="headerlink" title="配置 DNS API"></a>配置 DNS API</h4><p>acme.sh 程序目录为隐藏目录.acme.sh存放在当前用户家目录下.执行以下命令进入目录,并编辑account.conf,根据上文获取的 API 格式,复制粘贴到文件中保存.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cd</span><br><span class="line">cd .acme.sh</span><br><span class="line">vi account.conf</span><br><span class="line"></span><br><span class="line">export Ali_Key=&quot;....&quot;</span><br><span class="line">export Ali_Secret=&quot;.....&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="自动更新脚本拿走"><a href="#自动更新脚本拿走" class="headerlink" title="自动更新脚本拿走"></a>自动更新脚本拿走</h3><p>需要先配置DNS，详情见第4篇资料，此处用的阿里云</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">备份旧证书</span></span><br><span class="line">/bin/cp -rf /usr/local/nginx/conf/cert/*.*  /usr/local/nginx/conf/cert/sslbak</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">使用 acme.sh 生成新证书,此处使用了绝对路径来运行acme脚本，请按照实际情况操作。/home/ecs-user是我当前用户的家目录。</span></span><br><span class="line">/root/.acme.sh/acme.sh --issue --dns dns_ali -d e1.test.com  --fullchain-file /home/setup/sslkey/e1.test.com.pem --key-file /home/setup/sslkey/e1.test.com.key --force</span><br><span class="line">/root/.acme.sh/acme.sh --issue --dns dns_ali -d e2.test.com  --fullchain-file /home/setup/sslkey/e2.test.com.pem --key-file /home/setup/sslkey/e2.test.com.key --force</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">将新证书拷贝到 Nginx 证书目录</span></span><br><span class="line">/bin/cp -rf /home/setup/sslkey/* /usr/local/nginx/conf/cert</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">重启 Nginx 以应用新证书（请根据实际情况选择适当的重启方式）</span></span><br><span class="line">/usr/sbin/nginx -s reload</span><br></pre></td></tr></table></figure><hr><p>完结</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;事情是这样的&quot;&gt;&lt;a href=&quot;#事情是这样的&quot; class=&quot;headerlink&quot; title=&quot;事情是这样的&quot;&gt;&lt;/a&gt;事情是这样的&lt;/h3&gt;&lt;p&gt;你是不是也有一年又一年的新项目接入,对于要求https协议的网站，每3个月的TSL证书更新需求都要自己手动去</summary>
      
    
    
    
    <category term="运维" scheme="https://qdteng.online/categories/%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="https" scheme="https://qdteng.online/tags/https/"/>
    
    <category term="自动化" scheme="https://qdteng.online/tags/%E8%87%AA%E5%8A%A8%E5%8C%96/"/>
    
    <category term="acme" scheme="https://qdteng.online/tags/acme/"/>
    
  </entry>
  
  <entry>
    <title>好东西winlaunch</title>
    <link href="https://qdteng.online/2024/09/28/%E5%A5%BD%E4%B8%9C%E8%A5%BFwinlaunch/"/>
    <id>https://qdteng.online/2024/09/28/%E5%A5%BD%E4%B8%9C%E8%A5%BFwinlaunch/</id>
    <published>2024-09-28T01:59:48.000Z</published>
    <updated>2024-10-06T02:54:36.172Z</updated>
    
    <content type="html"><![CDATA[<h1 id="官网"><a href="#官网" class="headerlink" title="官网"></a>官网</h1><p><a href="https://winlaunch.org/">连接</a></p><h1 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h1><p>你可以在这个软件中添加本机安装的软件连接，尤其是安装在非C盘的软件，在重装系统后依然可以继续使用</p><hr><p>完结</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;官网&quot;&gt;&lt;a href=&quot;#官网&quot; class=&quot;headerlink&quot; title=&quot;官网&quot;&gt;&lt;/a&gt;官网&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;https://winlaunch.org/&quot;&gt;连接&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;使用&quot;&gt;&lt;a href=&quot;#使用&quot; </summary>
      
    
    
    
    <category term="乱弹" scheme="https://qdteng.online/categories/%E4%B9%B1%E5%BC%B9/"/>
    
    
    <category term="windows" scheme="https://qdteng.online/tags/windows/"/>
    
    <category term="winlaunch" scheme="https://qdteng.online/tags/winlaunch/"/>
    
    <category term="软件" scheme="https://qdteng.online/tags/%E8%BD%AF%E4%BB%B6/"/>
    
  </entry>
  
  <entry>
    <title>非主流监控hertzbeat</title>
    <link href="https://qdteng.online/2024/09/27/%E9%9D%9E%E4%B8%BB%E6%B5%81%E7%9B%91%E6%8E%A7hertzbeat/"/>
    <id>https://qdteng.online/2024/09/27/%E9%9D%9E%E4%B8%BB%E6%B5%81%E7%9B%91%E6%8E%A7hertzbeat/</id>
    <published>2024-09-27T12:50:35.000Z</published>
    <updated>2024-10-07T00:17:54.390Z</updated>
    
    <content type="html"><![CDATA[<h3 id="事情是这样的"><a href="#事情是这样的" class="headerlink" title="事情是这样的"></a>事情是这样的</h3><pre><code>一年又一年的项目积累下来如何实时监控项目的运行状态？尤其是跨机房、服务器运营商的各种项目</code></pre><h3 id="http式远程监控使用"><a href="#http式远程监控使用" class="headerlink" title="http式远程监控使用"></a>http式远程监控使用</h3><ul><li><p><a href="https://hertzbeat.apache.org/zh-cn/docs/start/quickstart/">Apache HertzBeat </a></p></li><li><p><a href="https://cloud.tencent.com/developer/article/2390847">入门资料</a></p></li><li><p>默认账号密码 admin&#x2F;hertzbeat</p></li><li><p>推荐docker运行 </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 1157:1157 -p 1158:1158 --name hertzbeat apache/hertzbeat</span><br></pre></td></tr></table></figure><p>运行后像下图那么一配置，以后再也不怕吃饭睡觉不知道哪个服务无法访问了</p></li><li><p>监控中心-应用服务监控-HTTP API<br><img src="https://raw.githubusercontent.com/qdteng-cn/qdteng/main/img/hertzbeat-http-api.png"></p></li><li><p>告警-消息通知-通知策略-新增通知策略<br><img src="https://raw.githubusercontent.com/qdteng-cn/qdteng/main/img/hertzbeat-email-set.png"></p></li></ul><hr><p>完结</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;事情是这样的&quot;&gt;&lt;a href=&quot;#事情是这样的&quot; class=&quot;headerlink&quot; title=&quot;事情是这样的&quot;&gt;&lt;/a&gt;事情是这样的&lt;/h3&gt;&lt;pre&gt;&lt;code&gt;一年又一年的项目积累下来如何实时监控项目的运行状态？尤其是跨机房、服务器运营商的各种项目
&lt;</summary>
      
    
    
    
    <category term="后端" scheme="https://qdteng.online/categories/%E5%90%8E%E7%AB%AF/"/>
    
    
    <category term="监控" scheme="https://qdteng.online/tags/%E7%9B%91%E6%8E%A7/"/>
    
    <category term="运维" scheme="https://qdteng.online/tags/%E8%BF%90%E7%BB%B4/"/>
    
    <category term="Hertzbeat" scheme="https://qdteng.online/tags/Hertzbeat/"/>
    
    <category term="第三方应用监控" scheme="https://qdteng.online/tags/%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%94%E7%94%A8%E7%9B%91%E6%8E%A7/"/>
    
  </entry>
  
  <entry>
    <title>微信转账到零钱</title>
    <link href="https://qdteng.online/2024/09/27/%E5%BE%AE%E4%BF%A1%E8%BD%AC%E8%B4%A6%E5%88%B0%E9%9B%B6%E9%92%B1/"/>
    <id>https://qdteng.online/2024/09/27/%E5%BE%AE%E4%BF%A1%E8%BD%AC%E8%B4%A6%E5%88%B0%E9%9B%B6%E9%92%B1/</id>
    <published>2024-09-27T12:25:37.000Z</published>
    <updated>2024-10-06T03:26:06.771Z</updated>
    
    <content type="html"><![CDATA[<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul><li><a href="https://pay.weixin.qq.com/docs/merchant/products/batch-transfer-to-balance/introduction.html">商家转账到零钱</a></li></ul><h2 id="问题解决"><a href="#问题解决" class="headerlink" title="问题解决"></a>问题解决</h2><h3 id="异步返回解密失败"><a href="#异步返回解密失败" class="headerlink" title="异步返回解密失败"></a>异步返回解密失败</h3><ul><li>这个支付返回异步通知在本机可正确解密，但是服务器上解密失败。<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">解析付款通知出错：支付通知回调，验签、解密失败---&gt;Processing WechatPay notification,signature verification failed,signType[WECHATPAY2-SHA256-RSA2048]serial[***]message[1727406002</span><br><span class="line">DcQqYFLpu2R7SEYz4mH9bDbtoaPlkexC</span><br><span class="line">&#123;&quot;id&quot;:&quot;13bfc133-d1be-5b53-8b90-388863c93e03&quot;,&quot;create_time&quot;:&quot;2024-09-27T10:59:55+08:00&quot;,&quot;resource_type&quot;:&quot;encrypt-resource&quot;,&quot;event_type&quot;:&quot;MCHTRANSFER.BATCH.FINISHED&quot;,&quot;summary&quot;:&quot;鍟嗗杞处鎵规瀹屾垚閫氱煡&quot;,&quot;resource&quot;:&#123;&quot;original_type&quot;:&quot;mch_payment&quot;,&quot;algorithm&quot;:&quot;AEAD_AES_256_GCM&quot;,&quot;ciphertext&quot;:&quot;JoUNycXeCGxbi+ptvs1o4lFlwMdvtuzwStCafdPqmjOE0YZyqZNlJtXeM03EYG+PmjRYevDQtP/l6IhOCoMDGYIBGfRaKT2WrF+81s0VyIqtVaFau0phz4gisangLIA2NMu5OSIHAOhau42NtWvwpPxOO9L6ImQg800qNq9ZthLMSBJ5qJMU5qj1MbdTuHLw8a/BdZ/o62HdJrrsHbRlx9MqYHIJca+ZCFxRAjJOzj0XlltkBUPnavxMCyvDdYi80/PyazIE/z2u7RdzIUBpb8inmVMRfu9raGc289qqMRWUL6AggxNQc/K2PdImBq+aNPUE2/Kze7TcqL6wd1TvNqYDDrRHLd81VpTZm7+ChCjwW+upfZKiC/8BpO03zUZ67Q37ubC7SdSKaUN98/F777Gdx2IbbX8X16iRGOGOhxsoXqobLuGqRfmA6ruo&quot;,&quot;associated_data&quot;:&quot;mch_payment&quot;,&quot;nonce&quot;:&quot;ZpKjEmbKoTZt&quot;&#125;&#125;</span><br><span class="line">]sign[BgLPsyZDaqGM2ObRYaiYjEqwWg+8gpxeWJvhxjRzhyzQh36Xbx6Ff+Rj8urrSSMpEU0/fSjw+GLiFH5wD5Ldf2tnQW520TEWPafMEJNE0cQkKqP8iWT3tkoU+tXclhjYL7XQj1KyU/3MaZ8z0Eb2q7x7iuGWuGX3ANz14skL7jo+tzdL9nx37XlbKiEjXJiOU6kQNhj4jAacqisIj5yGx2zgvGFDsE0DvawbjwdYQFnX9hUZMrEQJINmReQ4alKAW4TShCkxpATGOUaRlRMvcs3gvqJ+bVJJBd6Zrb4IOE7XwmGhKY7vjYBXfQUaYQiaaXM7qTqiwcyvR1LGmRZTvQ==]</span><br><span class="line"> </span><br></pre></td></tr></table></figure></li></ul><h3 id="解决思路"><a href="#解决思路" class="headerlink" title="解决思路"></a>解决思路</h3><p>依次排查 nginx、request params、request body、配置文件编码、jdk版本、java运行编码最终确认问题是java运行spring boot的编码问题。</p><ul><li><p>对比方式</p><img src="https://raw.githubusercontent.com/qdteng-cn/qdteng/main/img/java文件编码查看.png" width="200" height="200"  /></li><li><p>运行命令中添加编码  -Dfile.encoding&#x3D;utf-8</p></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -Dfile.encoding=utf-8 -jar %JAVA_JAR% --server.port=18085 --spring.profiles.active=prd</span><br></pre></td></tr></table></figure><hr><p>完结</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;参考资料&quot;&gt;&lt;a href=&quot;#参考资料&quot; class=&quot;headerlink&quot; title=&quot;参考资料&quot;&gt;&lt;/a&gt;参考资料&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://pay.weixin.qq.com/docs/merchant/product</summary>
      
    
    
    
    <category term="后端" scheme="https://qdteng.online/categories/%E5%90%8E%E7%AB%AF/"/>
    
    
    <category term="微信" scheme="https://qdteng.online/tags/%E5%BE%AE%E4%BF%A1/"/>
    
    <category term="微信支付" scheme="https://qdteng.online/tags/%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98/"/>
    
    <category term="wecht pay" scheme="https://qdteng.online/tags/wecht-pay/"/>
    
  </entry>
  
  <entry>
    <title>apache-nifi</title>
    <link href="https://qdteng.online/2024/09/25/apache-nifi/"/>
    <id>https://qdteng.online/2024/09/25/apache-nifi/</id>
    <published>2024-09-25T12:21:05.000Z</published>
    <updated>2024-10-05T08:51:37.506Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Apache-NiFi"><a href="#Apache-NiFi" class="headerlink" title="Apache NiFi"></a>Apache NiFi</h1><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>Apache NiFi 是一个开源的流式数据处理平台，用于收集、转换和路由数据。它使用户能够轻松地创建、监控和监控数据管道，从而实现数据收集、转换和路由。<br>更详细的介绍请移步<a href="https://nifi.apache.org/">Apache NiFi</a> 官网 and <a href="https://blog.csdn.net/jiangshouzhuang/article/details/105609041">Apache NiFi 如何从入门到不放弃</a>  。<br>为什么不是 canal、flume、spark 、flink？ 在我看来不同的业务场景使用的工具也不尽相同，我尤其喜欢nifi的<strong>颜值</strong></p><h2 id="安装部署"><a href="#安装部署" class="headerlink" title="安装部署"></a>安装部署</h2><h3 id="相关环境"><a href="#相关环境" class="headerlink" title="相关环境"></a>相关环境</h3><ul><li>Debian 11</li><li>JDK 22</li><li>NIFI 2.0.0-M3</li></ul><p>至于具体安装步骤 可参考 <a href="https://blog.csdn.net/u013071014/article/details/135702019">NIFI 2.0.0版本HTTPS访问部署</a><br>此处着重强调关于https问题，nifi的https端口为9443，但是默认的证书是自签名的，所以需要修改证书，否则无法访问。<br>因项目中存在多个部署环境，经常会修改nifi的访问ip所以根据需要写了个证书替换的脚本</p><h3 id="nifi-证书替换脚本"><a href="#nifi-证书替换脚本" class="headerlink" title="nifi 证书替换脚本"></a>nifi 证书替换脚本</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">nifi 证书替换脚本</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">lastip=&quot;192.168.2.4&quot;</span><br><span class="line">newip=&quot;1.1.1.1&quot;</span><br><span class="line">password=&quot;abcdef123456&quot;</span><br><span class="line"></span><br><span class="line">sed -i &quot;s/$lastip/$newip/g&quot; nifi.properties</span><br><span class="line">rm -rf nifi.crt nifi.csr  nifi.key  nifi.p12</span><br><span class="line">openssl genpkey -algorithm RSA -out nifi.key</span><br><span class="line">openssl req -new -key nifi.key -out nifi.csr -subj &quot;/C=US/ST=California/L=San Francisco/O=My Company/CN=$newip&quot;</span><br><span class="line">openssl x509 -req -days 3650 -in nifi.csr -signkey nifi.key -out nifi.crt</span><br><span class="line">openssl pkcs12 -export -in nifi.crt -inkey nifi.key -out nifi.p12 -name nifi -password pass:$password</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="自定义NIFI流程模板"><a href="#自定义NIFI流程模板" class="headerlink" title="自定义NIFI流程模板"></a>自定义NIFI流程模板</h2><h2 id="导入导出"><a href="#导入导出" class="headerlink" title="导入导出"></a>导入导出</h2>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Apache-NiFi&quot;&gt;&lt;a href=&quot;#Apache-NiFi&quot; class=&quot;headerlink&quot; title=&quot;Apache NiFi&quot;&gt;&lt;/a&gt;Apache NiFi&lt;/h1&gt;&lt;h2 id=&quot;介绍&quot;&gt;&lt;a href=&quot;#介绍&quot; class=&quot;head</summary>
      
    
    
    
    <category term="后端" scheme="https://qdteng.online/categories/%E5%90%8E%E7%AB%AF/"/>
    
    
    <category term="Apache" scheme="https://qdteng.online/tags/Apache/"/>
    
    <category term="Nifi" scheme="https://qdteng.online/tags/Nifi/"/>
    
    <category term="Java" scheme="https://qdteng.online/tags/Java/"/>
    
    <category term="大数据" scheme="https://qdteng.online/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
    <category term="ETL" scheme="https://qdteng.online/tags/ETL/"/>
    
  </entry>
  
  <entry>
    <title>mybatis中使用DDL语句对clickhouse操作</title>
    <link href="https://qdteng.online/2024/09/24/mybatis%E4%B8%AD%E4%BD%BF%E7%94%A8DDL%E8%AF%AD%E5%8F%A5%E5%AF%B9clickhouse%E6%93%8D%E4%BD%9C/"/>
    <id>https://qdteng.online/2024/09/24/mybatis%E4%B8%AD%E4%BD%BF%E7%94%A8DDL%E8%AF%AD%E5%8F%A5%E5%AF%B9clickhouse%E6%93%8D%E4%BD%9C/</id>
    <published>2024-09-24T11:55:56.000Z</published>
    <updated>2024-10-06T01:01:59.170Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前置准备"><a href="#前置准备" class="headerlink" title="前置准备"></a>前置准备</h1><h2 id="mybatisplus-spring-boot-多数据源配置"><a href="#mybatisplus-spring-boot-多数据源配置" class="headerlink" title="mybatisplus spring boot  多数据源配置"></a>mybatisplus spring boot  多数据源配置</h2><h3 id="pom-xml-添加引用"><a href="#pom-xml-添加引用" class="headerlink" title="pom.xml 添加引用"></a>pom.xml 添加引用</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>dynamic-datasource-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="application-yml-配置"><a href="#application-yml-配置" class="headerlink" title="application.yml 配置"></a>application.yml 配置</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">spring:</span><br><span class="line">    datasource:</span><br><span class="line">    druid:</span><br><span class="line">        stat-view-servlet:</span><br><span class="line">            enabled: true</span><br><span class="line">    dynamic:</span><br><span class="line">        # 配置全局druid参数，请按需配置</span><br><span class="line">        druid:</span><br><span class="line">            initial-size: 5</span><br><span class="line">            max-active: 8</span><br><span class="line">            min-idle: 3</span><br><span class="line">            max-wait: 1000</span><br><span class="line">            validation-query: &#x27;select 1&#x27;</span><br><span class="line">        primary: master</span><br><span class="line">        datasource:</span><br><span class="line">            #mysql数据库</span><br><span class="line">            master:</span><br><span class="line">                username: root</span><br><span class="line">                password: ***</span><br><span class="line">                url: jdbc:mysql://1.1.1.1:3306/weilai_crawl?useUnicode=true&amp;characterEncoding=utf8&amp;zeroDateTimeBehavior=convertToNull&amp;useSSL=true&amp;serverTimezone=GMT%2B8</span><br><span class="line">                driver-class-name: com.mysql.cj.jdbc.Driver</span><br><span class="line">            #clickhouse数据库</span><br><span class="line">            slave_1:</span><br><span class="line">                url: jdbc:clickhouse://1.1.1.1:8123/default?use_server_time_zone=true&amp;use_server_time_zone=false</span><br><span class="line">                username: default</span><br><span class="line">                password: ****</span><br><span class="line">                driver-class-name: com.clickhouse.jdbc.ClickHouseDriver</span><br></pre></td></tr></table></figure><h1 id="ClickHousee-DDL-问题"><a href="#ClickHousee-DDL-问题" class="headerlink" title="ClickHousee DDL 问题"></a>ClickHousee DDL 问题</h1><h2 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h2><p>在使用mybatis 调用update 方法执行clickhouse的ddl建表语句时出现异常 ,mybatis有sql语句的校验，对于clickhouse语法部分关键字不能识别，所以导致sql解析错误，找了半天mybatisplus组件好像没有解决办法。只能换了个思路通过mybatis获取数据源的jdbc connection，使用JDBC来执行DDL语句</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Caused by: org.mybatis.spring.MyBatisSystemException: nested exception is org.apache.ibatis.exceptions.PersistenceException: </span><br><span class="line">### Error updating database.  Cause: com.baomidou.mybatisplus.core.exceptions.MybatisPlusException: Failed to process, Error SQL: CREATE TABLE <span class="title function_">device_data_all_history</span> <span class="params">( `sys_id` String  , `dev_id` String  ,  `create_time` DateTime DEFAULT now()</span> , `insert_time` DateTime DEFAULT <span class="title function_">now</span><span class="params">()</span> , `c1`  String )</span><br><span class="line">ENGINE = MergeTree</span><br><span class="line">PARTITION BY <span class="title function_">toYYYYMMDD</span><span class="params">(create_time)</span></span><br><span class="line">ORDER <span class="title function_">BY</span> <span class="params">(dev_id,</span></span><br><span class="line"><span class="params"> create_time)</span></span><br><span class="line"><span class="type">SETTINGS</span> <span class="variable">index_granularity</span> <span class="operator">=</span> <span class="number">8192</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Caused by: net.sf.jsqlparser.parser.ParseException: Encountered unexpected token: <span class="string">&quot;ORDER&quot;</span> <span class="string">&quot;ORDER&quot;</span></span><br><span class="line">    at line <span class="number">4</span>, column <span class="number">4.</span></span><br><span class="line"></span><br><span class="line">Was expecting one of:</span><br><span class="line"></span><br><span class="line">    <span class="string">&quot;;&quot;</span></span><br><span class="line">    <span class="string">&quot;AS&quot;</span></span><br><span class="line">    <span class="string">&quot;DISABLE&quot;</span></span><br><span class="line">    <span class="string">&quot;ENABLE&quot;</span></span><br><span class="line">    <span class="string">&quot;LIKE&quot;</span></span><br><span class="line">    &lt;EOF&gt;</span><br></pre></td></tr></table></figure><h2 id="解决方式"><a href="#解决方式" class="headerlink" title="解决方式"></a>解决方式</h2><h3 id="mybatisPlus-多数据源获取-JDBC-Connection"><a href="#mybatisPlus-多数据源获取-JDBC-Connection" class="headerlink" title="mybatisPlus 多数据源获取 JDBC Connection"></a>mybatisPlus 多数据源获取 JDBC Connection</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> DynamicRoutingDataSource dynamicRoutingDataSource;</span><br><span class="line"></span><br><span class="line"><span class="comment">//某业务方法</span></span><br><span class="line">.....()&#123;</span><br><span class="line">    <span class="comment">//clickhouse 建表语句</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span><span class="string">&quot;create table ..... &quot;</span> ;</span><br><span class="line">    <span class="comment">//获取数据源 Connection</span></span><br><span class="line">    java.sql.<span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span>   dynamicRoutingDataSource.getDataSource(<span class="string">&quot;slave_1&quot;</span>).getConnection();</span><br><span class="line">    connection.setAutoCommit(<span class="literal">true</span>);</span><br><span class="line">    java.sql.<span class="type">Statement</span> <span class="variable">statement</span> <span class="operator">=</span>connection.createStatement();</span><br><span class="line">    statement.execute(sql);</span><br><span class="line">    statement.close();</span><br><span class="line">    connection.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p>完结</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;前置准备&quot;&gt;&lt;a href=&quot;#前置准备&quot; class=&quot;headerlink&quot; title=&quot;前置准备&quot;&gt;&lt;/a&gt;前置准备&lt;/h1&gt;&lt;h2 id=&quot;mybatisplus-spring-boot-多数据源配置&quot;&gt;&lt;a href=&quot;#mybatisplus-spr</summary>
      
    
    
    
    <category term="后端" scheme="https://qdteng.online/categories/%E5%90%8E%E7%AB%AF/"/>
    
    
    <category term="clickhouse" scheme="https://qdteng.online/tags/clickhouse/"/>
    
    <category term="mybatis" scheme="https://qdteng.online/tags/mybatis/"/>
    
    <category term="多数据源" scheme="https://qdteng.online/tags/%E5%A4%9A%E6%95%B0%E6%8D%AE%E6%BA%90/"/>
    
  </entry>
  
  <entry>
    <title>h2数据库备份</title>
    <link href="https://qdteng.online/2024/09/23/h2%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD/"/>
    <id>https://qdteng.online/2024/09/23/h2%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD/</id>
    <published>2024-09-23T03:01:08.000Z</published>
    <updated>2024-10-05T08:50:52.673Z</updated>
    
    <content type="html"><![CDATA[<h2 id="LinuxH2数据库备份"><a href="#LinuxH2数据库备份" class="headerlink" title="LinuxH2数据库备份"></a>LinuxH2数据库备份</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">BACKUP=/home/dbback</span><br><span class="line">TMPBACKUP=/tmp/dbback</span><br><span class="line"></span><br><span class="line">DATETIME=$(date +%Y%m%d%H%M%S)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">打印日志</span></span><br><span class="line">function log_correct () &#123;</span><br><span class="line">    USER=$(whoami)</span><br><span class="line">    echo &quot;$&#123;DATETIME&#125; $&#123;USER&#125; execute $0 [INFO] $@ &quot; &gt;&gt; &quot;/home/shell/backup_log.txt&quot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">创建备份目录</span></span><br><span class="line">mkdir -p &quot;$&#123;TMPBACKUP&#125;/$DATETIME&quot;</span><br><span class="line"></span><br><span class="line">cd $&#123;TMPBACKUP&#125;/$DATETIME/</span><br><span class="line">cp /home/java/xzl/h2/* ./</span><br><span class="line">tar -cvf $DATETIME.tar *.db</span><br><span class="line"></span><br><span class="line">mv $DATETIME.tar $BACKUP</span><br><span class="line"></span><br><span class="line">cd $BACKUP</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">删除7天前的文件</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">find <span class="variable">$BACKUP</span> -<span class="built_in">type</span> f -mtime +7 -<span class="built_in">exec</span> <span class="built_in">rm</span> -f &#123;&#125; \;</span></span><br><span class="line"></span><br><span class="line">log_correct &quot;数据库备份到：$&#123;BACKUP&#125; 下&quot;</span><br></pre></td></tr></table></figure><hr><p>完结</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;LinuxH2数据库备份&quot;&gt;&lt;a href=&quot;#LinuxH2数据库备份&quot; class=&quot;headerlink&quot; title=&quot;LinuxH2数据库备份&quot;&gt;&lt;/a&gt;LinuxH2数据库备份&lt;/h2&gt;&lt;figure class=&quot;highlight shell&quot;&gt;&lt;</summary>
      
    
    
    
    <category term="运维" scheme="https://qdteng.online/categories/%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="linux" scheme="https://qdteng.online/tags/linux/"/>
    
    <category term="h2" scheme="https://qdteng.online/tags/h2/"/>
    
  </entry>
  
  <entry>
    <title>mysq备份脚本</title>
    <link href="https://qdteng.online/2024/09/23/mysq%E5%A4%87%E4%BB%BD%E8%84%9A%E6%9C%AC/"/>
    <id>https://qdteng.online/2024/09/23/mysq%E5%A4%87%E4%BB%BD%E8%84%9A%E6%9C%AC/</id>
    <published>2024-09-23T02:45:09.000Z</published>
    <updated>2024-10-06T01:55:06.211Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Linux-debian"><a href="#Linux-debian" class="headerlink" title="Linux debian"></a>Linux debian</h1><ul><li><p>7z压缩安装</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install p7zip p7zip-full p7zip-rar </span><br></pre></td></tr></table></figure></li><li><p>备份mysql所有数据库,7z打包,保留7天文件</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">    #!/bin/bash</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">MySQL配置</span></span><br><span class="line">MYSQL_IP=&quot;127.0.0.1&quot;</span><br><span class="line">MYSQL_PORT=&quot;3306&quot;</span><br><span class="line">MYSQL_USER=&quot;root&quot;</span><br><span class="line">MYSQL_PASSWORD=&quot;111111&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">备份配置</span></span><br><span class="line">BACKUP_DIR=&quot;/home/dbback&quot;  # 修改为实际备份目录</span><br><span class="line">DATE_STAMP=$(date +&quot;%Y%m%d%H%M%S&quot;)</span><br><span class="line">TODAY=$(date +&quot;%Y%m%d&quot;)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">创建备份目录</span></span><br><span class="line">mkdir -p $BACKUP_DIR</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">获取所有数据库名称</span></span><br><span class="line">DATABASES=$(mysql -h $MYSQL_IP -P $MYSQL_PORT -u $MYSQL_USER -p$MYSQL_PASSWORD -e &#x27;SHOW DATABASES;&#x27; | grep -vE &#x27;^Database|^information_schema|^performance_schema|^mysql|^sys&#x27;)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">遍历每个数据库进行备份</span></span><br><span class="line">for db in $DATABASES; do</span><br><span class="line">    mysqldump -h $MYSQL_IP -P $MYSQL_PORT -u $MYSQL_USER -p$MYSQL_PASSWORD $db &gt; &quot;$BACKUP_DIR/$db-$DATE_STAMP.sql&quot;</span><br><span class="line">done</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">打包成7z文件</span></span><br><span class="line">7z a &quot;$BACKUP_DIR/dbbackup-$DATE_STAMP.7z&quot; &quot;$BACKUP_DIR&quot;/*.sql</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">清理旧备份</span></span><br><span class="line">find $BACKUP_DIR -name &quot;*.7z&quot; -type f -mtime +7 -exec rm &#123;&#125; \;</span><br><span class="line">find $BACKUP_DIR -name &quot;*.sql&quot; -type f -mtime +7 -exec rm &#123;&#125; \;</span><br><span class="line"></span><br><span class="line">echo &quot;Backup completed and old backups cleaned.&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><h1 id="Window"><a href="#Window" class="headerlink" title="Window"></a>Window</h1><p>mysql 单个数据库备份，并使用rar打包，保留7天数据</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">@echo off</span><br><span class="line">set &quot;Ymd=%date:~,4%%date:~5,2%%date:~8,2%&quot;</span><br><span class="line">set WINRAR=C:\Program Files\WinRAR\WinRAR.exe</span><br><span class="line">set MYSQLDUMP_PATH=C:\Program Files\MySQL\MySQL Server 5.7\bin\mysqldump.exe</span><br><span class="line">set BACKUP_PATH=c:\dbback\</span><br><span class="line">set DB_NAME=test</span><br><span class="line">set DBPASSWORD=111111</span><br><span class="line"></span><br><span class="line">:: 备份</span><br><span class="line">&quot;%MYSQLDUMP_PATH%&quot; --opt -u root --password=%DBPASSWORD% %DB_NAME% &gt; %BACKUP_PATH%%DB_NAME%_%Ymd%.sql</span><br><span class="line">&quot;%WINRAR%&quot;  a -afrar -ep1 -df  &quot;%BACKUP_PATH%%DB_NAME%_%Ymd%.zip&quot;  &quot;%BACKUP_PATH%%DB_NAME%_%Ymd%.sql&quot; &amp;&amp; del %BACKUP_PATH%%DB_NAME%_%Ymd%.sql</span><br><span class="line"></span><br><span class="line">:: 删除大于7天的</span><br><span class="line">forfiles /p %BACKUP_PATH% /s /d -7 /c &quot;cmd /c del/f/s/q @path&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@echo on</span><br></pre></td></tr></table></figure><hr><p>完结</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Linux-debian&quot;&gt;&lt;a href=&quot;#Linux-debian&quot; class=&quot;headerlink&quot; title=&quot;Linux debian&quot;&gt;&lt;/a&gt;Linux debian&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;7z压缩安装&lt;/p&gt;
&lt;figure cl</summary>
      
    
    
    
    <category term="运维" scheme="https://qdteng.online/categories/%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="linux" scheme="https://qdteng.online/tags/linux/"/>
    
    <category term="mysql" scheme="https://qdteng.online/tags/mysql/"/>
    
    <category term="debian" scheme="https://qdteng.online/tags/debian/"/>
    
  </entry>
  
  <entry>
    <title>clickhouse 的导入导出</title>
    <link href="https://qdteng.online/2024/09/23/linux-clickhouse%E5%A4%87%E4%BB%BD%E8%84%9A%E6%9C%AC/"/>
    <id>https://qdteng.online/2024/09/23/linux-clickhouse%E5%A4%87%E4%BB%BD%E8%84%9A%E6%9C%AC/</id>
    <published>2024-09-23T02:16:21.000Z</published>
    <updated>2024-10-05T08:50:52.596Z</updated>
    
    <content type="html"><![CDATA[<h1 id="linux"><a href="#linux" class="headerlink" title="linux"></a>linux</h1><h2 id="备份脚本"><a href="#备份脚本" class="headerlink" title="备份脚本"></a>备份脚本</h2><ul><li>可将以下内容复制到backCk.sh 添加可执行权限<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">定义属性</span></span><br><span class="line">PASSWORD=&quot;111111&quot;</span><br><span class="line"></span><br><span class="line">BACKUP=/home/dbback</span><br><span class="line">TMPBACKUP=/tmp/ckdbback</span><br><span class="line"></span><br><span class="line">DATETIME=$(date +%Y%m%d%H%M%S)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">打印日志</span></span><br><span class="line">function log_correct () &#123;</span><br><span class="line">    USER=$(whoami)</span><br><span class="line">    echo &quot;$&#123;DATETIME&#125; $&#123;USER&#125; execute $0 [INFO] $@ &quot; &gt;&gt; &quot;/home/shell/backup_log.txt&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">log_correct &quot;开始执行 CK 备份任务&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">创建备份目录</span></span><br><span class="line">mkdir -p &quot;$&#123;TMPBACKUP&#125;/$DATETIME&quot;</span><br><span class="line"></span><br><span class="line">cd $&#123;TMPBACKUP&#125;/$DATETIME/</span><br><span class="line">clickhouse-client --user=default --password=$PASSWORD --query=&quot;SELECT * FROM test INTO OUTFILE &#x27;./test.binary&#x27; FORMAT RowBinary&quot;</span><br><span class="line"></span><br><span class="line">tar -cvf &quot;CKBACK_$DATETIME.tar&quot; *.binary</span><br><span class="line">mv &quot;CKBACK_$DATETIME.tar&quot; $BACKUP</span><br><span class="line">log_correct &quot;数据库【CK】已备份到：$&#123;BACKUP&#125; 下&quot;</span><br><span class="line"></span><br><span class="line">rm -rf $TMPBACKUP</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">删除7天前的文件</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">find <span class="variable">$BACKUP</span> -<span class="built_in">type</span> f -mtime +7 -<span class="built_in">exec</span> <span class="built_in">rm</span> -f &#123;&#125; \;</span></span><br><span class="line"></span><br><span class="line">log_correct &quot;完成 CK 备份任务&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><h2 id="还原导出的备份数据"><a href="#还原导出的备份数据" class="headerlink" title="还原导出的备份数据"></a>还原导出的备份数据</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">登陆到clickhouse</span></span><br><span class="line">clickhouse-client --host 127.0.0.1  --port 9000 --user default --password  &quot;111111&quot;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">从备份文件还原数据</span></span><br><span class="line">INSERT INTO weilai.sd_chukou FROM INFILE &#x27;/ckback/test.binary&#x27; FORMAT RowBinary</span><br></pre></td></tr></table></figure><h1 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h1><h2 id="docker下运行clickhouse的备份脚本"><a href="#docker下运行clickhouse的备份脚本" class="headerlink" title="docker下运行clickhouse的备份脚本"></a>docker下运行clickhouse的备份脚本</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">@title CK backup start</span><br><span class="line">@echo off</span><br><span class="line">setlocal enabledelayedexpansion</span><br><span class="line">@color 0a</span><br><span class="line">:: --------------------参数设置------------------------</span><br><span class="line">:: 设置时间变量</span><br><span class="line">echo --------------------CK备份开始--------------------</span><br><span class="line"></span><br><span class="line">set YEAR=%date:~0,4%</span><br><span class="line">set MONTH=%date:~5,2%</span><br><span class="line">set DAY=%date:~8,2%</span><br><span class="line">:: 如果在 dos 下输入 time 返回的不是 24 小时制（没有 0 填充），请自行修改此处 </span><br><span class="line">set HOUR=%time:~0,2%</span><br><span class="line">set MINUTE=%time:~3,2%</span><br><span class="line">set SECOND=%time:~6,2%</span><br><span class="line"></span><br><span class="line">set &quot;Ymd=%YEAR%%MONTH%%DAY%&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">docker exec -it --user root 800d5e4b1667  bash -c &quot; clickhouse-client --user=default --password=111111 --query=\&quot;SELECT * FROM test INTO OUTFILE &#x27;/var/log/clickhouse-server/test%Ymd%.binary&#x27; FORMAT RowBinary\&quot; &quot;</span><br><span class="line"></span><br><span class="line">:: --------------------结束备份------------------------</span><br><span class="line">@echo on</span><br></pre></td></tr></table></figure><hr><p>完结</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;linux&quot;&gt;&lt;a href=&quot;#linux&quot; class=&quot;headerlink&quot; title=&quot;linux&quot;&gt;&lt;/a&gt;linux&lt;/h1&gt;&lt;h2 id=&quot;备份脚本&quot;&gt;&lt;a href=&quot;#备份脚本&quot; class=&quot;headerlink&quot; title=&quot;备份脚本&quot;</summary>
      
    
    
    
    <category term="运维" scheme="https://qdteng.online/categories/%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="linux" scheme="https://qdteng.online/tags/linux/"/>
    
    <category term="clickhouse" scheme="https://qdteng.online/tags/clickhouse/"/>
    
    <category term="docker" scheme="https://qdteng.online/tags/docker/"/>
    
    <category term="shell" scheme="https://qdteng.online/tags/shell/"/>
    
    <category term="bat" scheme="https://qdteng.online/tags/bat/"/>
    
  </entry>
  
  <entry>
    <title>怎样创建一个像这样的博客</title>
    <link href="https://qdteng.online/2024/09/22/hello-world/"/>
    <id>https://qdteng.online/2024/09/22/hello-world/</id>
    <published>2024-09-22T08:29:13.928Z</published>
    <updated>2024-10-05T08:50:52.764Z</updated>
    
    <content type="html"><![CDATA[<h1 id="新世界"><a href="#新世界" class="headerlink" title="新世界"></a>新世界</h1><h2 id="事情是这样的"><a href="#事情是这样的" class="headerlink" title="事情是这样的"></a>事情是这样的</h2><img src="https://cdn.jsdelivr.net/gh/qdteng-cn/qdteng@main/img202409212128072.png"  width="200" height="200" /><img src="https://cdn.jsdelivr.net/gh/qdteng-cn/qdteng@main/img202409212127575.png"  width="200" height="200" /><img src="https://cdn.jsdelivr.net/gh/qdteng-cn/qdteng@main/img202409212129741.png"  width="200" height="200" /><p>综上有图真相所述，有些博客或者笔记前期好用是好用就是有可能后期费点钱或者功夫(属于前期英雄)，为了你好我好大家好（方便阅读’baipiao’）于是便有了本站</p><h2 id="使用是这样的"><a href="#使用是这样的" class="headerlink" title="使用是这样的"></a>使用是这样的</h2><p>更多的资料建议bing或google <strong>hexo github Pages</strong> 关键字</p><h3 id="GitHub-Pages-的主要特点"><a href="#GitHub-Pages-的主要特点" class="headerlink" title="GitHub Pages 的主要特点"></a>GitHub Pages 的主要特点</h3><ul><li>免费托管： GitHub Pages 提供免费的静态网站托管服务，允许用户将自己的网站内容托管在 GitHub 上，用户不需要支付额外的托管费用；</li><li>使用简单： 创建和管理 GitHub Pages 静态网站相对简单，特别是对于熟悉 GitHub 的用户来说，用户只需在自己的 GitHub 帐户中创建一个特定名称的仓库，将网站文件上传到该仓库即可；</li><li>自定义域名： 用户可以选择使用自定义域名来访问他们的 GitHub Pages 网站，这使得它们更适合个人网站、博客和项目页面；</li><li>支持多种静态网站生成工具： GitHub Pages 支持多种静态网站生成工具，如 Jekyll、Hugo、Gatsby 等，以及纯HTML、CSS 和 JavaScript 等前端技术，这使得用户能够根据自己的需求选择适合他们的工具；</li><li>自动构建： GitHub Pages 可以自动构建用户上传的网站内容，无需用户手动生成或编译网页，这使得发布网站变得更加简单。 对于开发人员和技术爱好者来说，GitHub Pages 是一个很好的选择，用于托管个人网站、博客、文档、项目页面等静态内容，它提供了一个方便的方式来分享和展示自己的作品。</li></ul><h3 id="Github-Pages网站类型"><a href="#Github-Pages网站类型" class="headerlink" title="Github Pages网站类型"></a>Github Pages网站类型</h3><p>   在搭建前，默认已经注册成功了Github用户，现在开始根据官网教程一步一步的搭建。</p><p>GithubPages的站点类型有几种：</p><ul><li>个人或组织站点（User or Organization sites）：对于个人或组织站点，每个GitHub用户或组织只能有一个站点，它通常使用username.github.io或organizationname.github.io的格式，这是GitHub Pages的默认站点，通常用于个人网站、博客等。</li><li>项目站点（Project sites）：对于项目站点，每个GitHub仓库可以有一个关联的GitHub Pages站点，这意味着对于每个项目，您可以创建一个独立的GitHub Pages站点，无需限制。</li></ul><h3 id="GitHub-创建个人（组织）类型的网站"><a href="#GitHub-创建个人（组织）类型的网站" class="headerlink" title="GitHub 创建个人（组织）类型的网站"></a>GitHub 创建个人（组织）类型的网站</h3><ol><li><p>Step1： 新建一个项目<br>登录Github：<a href="https://github.com/%EF%BC%8C%E5%9C%A8%E9%A1%B6%E9%83%A8%E8%8F%9C%E5%8D%95%E6%A0%8F%E7%82%B9%E5%87%BB%E2%80%9C+%E2%80%9D%EF%BC%8C%E7%84%B6%E5%90%8E%E2%80%9CNew">https://github.com/，在顶部菜单栏点击“+”，然后“New</a> repository”新建仓库，输入项目的相关信息，然后“Create repository”创建仓库：</p><p>注意：</p><p><mark>Repository name 格式必须为 用户名.github.io</mark></p><p><mark>仓库类型为Public</mark></p><p><img src="https://raw.githubusercontent.com/qdteng-cn/qdteng/main/img202409221131377.png"></p><p><img src="https://raw.githubusercontent.com/qdteng-cn/qdteng/main/img202409221138627.png"></p></li><li><p>Step2： 将自己的静态站点文件上传到仓库中</p><p>关于github如何上传文件，具体可bing 一下，本站采用hexo生成，并上传，接下来更精彩</p><p><img src="https://raw.githubusercontent.com/qdteng-cn/qdteng/main/img202409221140420.png"></p></li><li><p>Step3： 访问</p><p>大概等待几十秒，访问：<a href="https://用户名.github.io/">https:&#x2F;&#x2F;用户名.github.io&#x2F;</a>，即可部署第一个属于自己的静态网站了，可以看到部署成功了，本站地址（<a href="https://qdteng-cn.github.io/">https://qdteng-cn.github.io</a>）</p></li></ol><h3 id="静态网站生成工具"><a href="#静态网站生成工具" class="headerlink" title="静态网站生成工具"></a>静态网站生成工具</h3><p>以下是一些GitHub Pages支持的主要静态网站生成工具：</p><ol><li><p>Jekyll（<a href="https://jekyllrb.com）：">https://jekyllrb.com）：</a> Jekyll是GitHub Pages的默认静态网站生成工具，它使用Markdown文件和Liquid模板引擎来创建静态网站，Jekyll对于博客和文档站点非常流行。</p></li><li><p>Hugo（<a href="https://gohugo.io/%EF%BC%89%EF%BC%9A">https://gohugo.io/）：</a> Hugo是另一个受欢迎的静态网站生成工具，它非常快速且易于使用，它使用Go语言编写，支持多种主题和内容组织方式。</p></li><li><p>Gatsby（<a href="https://www.gatsbyjs.com/%EF%BC%89%EF%BC%9A">https://www.gatsbyjs.com/）：</a> Gatsby是基于React的静态网站生成工具，它可以构建高性能、现代化的网站，Gatsby适用于博客、电子商务、应用程序文档等。</p></li><li><p>VuePress（<a href="https://vuepress.vuejs.org/%EF%BC%89%EF%BC%9A">https://vuepress.vuejs.org/）：</a> VuePress是Vue.js驱动的静态网站生成工具，专注于文档站点，它支持Markdown文件和Vue组件。</p></li><li><p>Hexo（<a href="https://hexo.io/%EF%BC%89%EF%BC%9A">https://hexo.io/）：</a> Hexo是一个快速、简单的博客框架，使用Markdown文件来生成静态博客，它是Node.js应用程序。</p></li><li><p>Pelican（<a href="https://blog.getpelican.com/%EF%BC%89%EF%BC%9A">https://blog.getpelican.com/）：</a> Pelican是使用Python编写的静态网站生成器，适用于博客和文档。</p></li><li><p>Middleman（<a href="https://middlemanapp.com/%EF%BC%89%EF%BC%9A">https://middlemanapp.com/）：</a> Middleman是Ruby编写的静态网站生成工具，支持多种模板和数据源，适用于各种项目。</p></li><li><p>Sphinx（<a href="https://www.sphinx-doc.org/%EF%BC%89%EF%BC%9A">https://www.sphinx-doc.org/）：</a> Sphinx是一个Python文档生成工具，通常用于技术文档和文档站点。</p></li><li><p>MkDocs（<a href="https://www.mkdocs.org）：">https://www.mkdocs.org）：</a> MkDocs是Python编写的文档生成工具，使用Markdown文件创建文档站点。</p></li></ol><h3 id="Hexo生成静态网站"><a href="#Hexo生成静态网站" class="headerlink" title="Hexo生成静态网站"></a>Hexo生成静态网站</h3><p>前面提到Hexo是node.js应用程序，前期的node环境准备在这不再详述，不熟悉的同学建议先了解一下 <mark>node 、npm 、nvm  </mark></p><p><a href="https://hexo.io/zh-cn/">Hexo官网</a></p><p>以下准了一些 hexo 的常用node命令行 </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-cli -g // hexo的安装</span><br><span class="line">hexo init blog //初始化项目</span><br><span class="line">hexo clean //清空已经存在的hexo网站文件</span><br><span class="line">hexo generate(可简写g) //依据网页文件和新的css样式生成新的网站文件</span><br><span class="line">hexo server(可简写为s) //启动本地服务器，可以在localhost：4000查看网站修改效果</span><br><span class="line">hexo new &quot;我的第一篇文章&quot; //创建一篇文章，根目录的source里面的md文件可以修改文章内容</span><br><span class="line">npm install hexo-deployer-git --save //安装上传到仓库的插件，才能进行发布文章的命令</span><br><span class="line">hexo g --d //发布文章 一键部署并推送到gitee仓库上</span><br></pre></td></tr></table></figure><h3 id="Hexo更换主题"><a href="#Hexo更换主题" class="headerlink" title="Hexo更换主题"></a>Hexo更换主题</h3><p>官方主题库直达链接： <a href="https://hexo.io/themes/">Themes | Hexo</a> </p><p>下载响应的主题包后 放到 &#x2F;themes&#x2F; 目录下<img src="https://raw.githubusercontent.com/qdteng-cn/qdteng/main/img202409221448746.png"></p><p>修改&#x2F;_config.yml文件</p><img src="https://raw.githubusercontent.com/qdteng-cn/qdteng/main/img202409221452210.png" title="" alt="" width="552"><h3 id="域名指向"><a href="#域名指向" class="headerlink" title="域名指向"></a>域名指向</h3><p>阿里云域名CNAME指向</p><img src="https://raw.githubusercontent.com/qdteng-cn/qdteng/main/img/20240923074500.png" title="" alt="" width="536"><p>Github配置使用自定义域名</p><img src="https://raw.githubusercontent.com/qdteng-cn/qdteng/main/img/20240923074625.png" title="" alt="" width="547"><h2 id="备选方案"><a href="#备选方案" class="headerlink" title="备选方案"></a>备选方案</h2><p>gitee的pages （后来下线了，具体上线时间不详）</p><p>gitlab的pages （看起来有点麻烦，国内的应该访问速度较好）</p><p>如果github也收费了 （我不介意买个域名+网站空间）</p><img src="https://raw.githubusercontent.com/qdteng-cn/qdteng/main/img202409221458279.png" title="" alt="" width="447"><h2 id="日常使用"><a href="#日常使用" class="headerlink" title="日常使用"></a>日常使用</h2><p>以前 免费的Typora用着还可以，后来收费了；换成了 markText+picgo</p><p>picText是用来编辑marketdown格式编辑器，因为markdown对图片的支持仅限本地，尤其发布到网站时容易丢掉图片所以建议使用图床软件引用云服务，免费的服务可以用github，但是国内不是很友好，所以免费的图床策略可以用<a href="https://picgo.github.io/PicGo-Doc/zh/">picgo</a>+github+<a href="https://www.jsdelivr.com/github">jsdelivr</a> ;jsdelivr是个免费的cdn服务。像阿里云、七牛、腾讯等等收费的云服务都很好用就是有点费人民币</p><p>写完文件 后 是不是希望有个一键发布的脚本 ？</p><p>新建一个.sh 或者 .bat 文件将如下代码放入也就OK了，或者记忆力好直接敲命令行也很OK</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo g --d</span><br></pre></td></tr></table></figure><h2 id="尼卡"><a href="#尼卡" class="headerlink" title="尼卡"></a>尼卡</h2><p><img src="https://cdn.jsdelivr.net/gh/qdteng-cn/qdteng@main/img202409221540253.png"></p><p>自乔伊·波伊之后的过去800年间，橡胶果实从未有过「觉醒」之事，而如今橡胶果实成功「觉醒」，并显现出“太阳神尼卡”之姿。 </p><p>尼卡的身体具有橡胶的特性，可以用任何方式战斗，无论走到哪里，他都能让人们绽放笑容。尼卡是“解放的战士”，因其推翻奴隶主的压迫，解放被奴役的人们，并建立巨大王国的功绩也被称为“太阳神尼卡”。当能力者的身心与“能力”相匹配时就会觉醒，觉醒后会给橡胶的肉体带来更上一层的“腕力”和“自由”，据说那是世上最匪夷所思的能力，在路飞成为能力者之前的几百年从未觉醒过。</p><p>忙了半天是不是希望自己的博客有个个性的icon？资深海贼迷推荐给你一款在线PS用来扣取自己感兴趣的图标用作自己的网站，我就厉害了把草帽扣下来了</p><img title="" src="https://cdn.jsdelivr.net/gh/qdteng-cn/qdteng@main/imgfavicon.png" alt="" width="502"><p><a href="https://ps.gaoding.com/#/">【在线PS】PS软件网页版，ps在线图片处理工具photopea-稿定设计PS</a></p><hr><p>完结</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;新世界&quot;&gt;&lt;a href=&quot;#新世界&quot; class=&quot;headerlink&quot; title=&quot;新世界&quot;&gt;&lt;/a&gt;新世界&lt;/h1&gt;&lt;h2 id=&quot;事情是这样的&quot;&gt;&lt;a href=&quot;#事情是这样的&quot; class=&quot;headerlink&quot; title=&quot;事情是这样的&quot;&gt;&lt;</summary>
      
    
    
    
    <category term="乱弹" scheme="https://qdteng.online/categories/%E4%B9%B1%E5%BC%B9/"/>
    
    
    <category term="乱弹" scheme="https://qdteng.online/tags/%E4%B9%B1%E5%BC%B9/"/>
    
    <category term="建站" scheme="https://qdteng.online/tags/%E5%BB%BA%E7%AB%99/"/>
    
  </entry>
  
</feed>
